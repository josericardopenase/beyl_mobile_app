"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=FormDateTimePicker2;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _datetimepicker=_interopRequireDefault(require("@react-native-community/datetimepicker"));var _title=_interopRequireDefault(require("../../titles/title5"));var _palleteColors=_interopRequireDefault(require("../../palleteColors"));var _formik=require("formik");var _titleError=_interopRequireDefault(require("../../titles/titleError"));var _vectorIcons=require("@expo/vector-icons");var _jsxFileName="/home/pepe/Escritorio/beylapp/components/general_components/forms/input_types/formDateTimePicker2.js";function FormDateTimePicker2(_ref){var name=_ref.name,placeholder=_ref.placeholder,mode=_ref.mode,first=_ref.first;var _useState=(0,_react.useState)(new Date(Date.now())),_useState2=(0,_slicedToArray2["default"])(_useState,2),date=_useState2[0],setDate=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=(0,_slicedToArray2["default"])(_useState3,2),show=_useState4[0],setShow=_useState4[1];var options={weekday:'short',year:'numeric',month:'short',day:'numeric'};var _useFormikContext=(0,_formik.useFormikContext)(),setFieldTouched=_useFormikContext.setFieldTouched,handleChange=_useFormikContext.handleChange,errors=_useFormikContext.errors,touched=_useFormikContext.touched,setFieldValue=_useFormikContext.setFieldValue;function formatDate(d){return d.getFullYear()+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+("0"+d.getDate()).slice(-2);}function formatTime(d){return d.toLocaleTimeString('es-ES','DD/MM/YYYY').substr(0,5);}var onChange=function onChange(event,selectedDate){var currentDate=selectedDate||date;setShow(_reactNative.Platform.OS==='ios');setDate(currentDate);setFieldTouched(name);if(mode==="date")setFieldValue(name,formatDate(currentDate));else setFieldValue(name,formatTime(currentDate));};(0,_react.useEffect)(function(){onChange();if(mode==="time"){setDate(new Date(0,0,0,0,1,0));}},[]);var showIt=function showIt(){setShow(true);};return _react["default"].createElement(_reactNative.View,{__source:{fileName:_jsxFileName,lineNumber:54,columnNumber:1}},_react["default"].createElement(_reactNative.View,{__source:{fileName:_jsxFileName,lineNumber:55,columnNumber:7}}),_react["default"].createElement(_reactNative.View,{__source:{fileName:_jsxFileName,lineNumber:57,columnNumber:7}},_react["default"].createElement(_reactNative.TouchableOpacity,{onPress:showIt,style:{backgroundColor:_palleteColors["default"].backgroundSecondary,flexDirection:"row",justifyContent:"space-between",paddingRight:10,paddingLeft:10,paddingTop:15,paddingBottom:15,borderRadius:10,marginTop:10},__source:{fileName:_jsxFileName,lineNumber:58,columnNumber:9}},_react["default"].createElement(_reactNative.View,{style:{flexDirection:"row",alignItems:"center"},__source:{fileName:_jsxFileName,lineNumber:70,columnNumber:13}},_react["default"].createElement(_vectorIcons.MaterialCommunityIcons,{name:"calendar",style:{marginRight:10},color:_palleteColors["default"].textSecondaryColor,size:20,__source:{fileName:_jsxFileName,lineNumber:71,columnNumber:15}}),_react["default"].createElement(_title["default"],{primary:true,__source:{fileName:_jsxFileName,lineNumber:72,columnNumber:15}},placeholder)),_react["default"].createElement(_title["default"],{primary:true,__source:{fileName:_jsxFileName,lineNumber:74,columnNumber:13}},mode==="date"?date.toLocaleDateString("es-ES",options):(date.getHours()!=0?date.getHours()>1?date.getHours()+" horas ":date.getHours()+" hora ":"")+(date.getMinutes()!=0?date.getMinutes()<2?date.getMinutes()+" minuto ":date.getMinutes()+" minutos ":"0 minutos"))),_react["default"].createElement(_titleError["default"],{error:errors[name],visible:touched[name],__source:{fileName:_jsxFileName,lineNumber:76,columnNumber:9}})),show&&_react["default"].createElement(_datetimepicker["default"],{testID:"dateTimePicker",value:date,mode:mode,is24Hour:true,display:"default",onChange:onChange,color:true,__source:{fileName:_jsxFileName,lineNumber:79,columnNumber:9}}));}