"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=ProgressSnippet;var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _apiGeneralHistory=_interopRequireDefault(require("../../../../api/apiGeneralHistory"));var _useApiCallback=_interopRequireDefault(require("../../../../customHooks/useApiCallback"));var _loading=_interopRequireDefault(require("../../../general_components/loading"));var _title=_interopRequireDefault(require("../../../general_components/titles/title3"));var _progressBox=_interopRequireDefault(require("./history/progressBox"));var _eventingBus=_interopRequireDefault(require("eventing-bus"));var _events=require("../../../../events/events");var _reactNativeGestureHandler=require("react-native-gesture-handler");var _palleteColors=_interopRequireDefault(require("../../../general_components/palleteColors"));var _MaterialCommunityIcons=_interopRequireDefault(require("@expo/vector-icons/MaterialCommunityIcons"));var _native=require("@react-navigation/native");var _messageBox=_interopRequireDefault(require("../../../general_components/messageBox"));var _jsxFileName="/home/pepe/Escritorio/beylapp/components/normal_navigation/components/progress/progressSnippet.js";function ProgressSnippet(){var getActivitie=(0,_useApiCallback["default"])(_apiGeneralHistory["default"].getHistory,function(data){return setActivities(data.results);});var _useState=(0,_react.useState)([]),_useState2=(0,_slicedToArray2["default"])(_useState,2),activities=_useState2[0],setActivities=_useState2[1];var navigation=(0,_native.useNavigation)();_eventingBus["default"].on(_events.ADDED_ACTIVITIE,function(data){setActivities([data].concat((0,_toConsumableArray2["default"])(activities.filter(function(item,index){return index!==0;}))));console.log(activities);});(0,_react.useEffect)(function(){getActivitie.request();},[]);if(getActivitie.loading)return _react["default"].createElement(_loading["default"],{__source:{fileName:_jsxFileName,lineNumber:35,columnNumber:16}});return _react["default"].createElement(_reactNative.View,{style:{marginBottom:10},__source:{fileName:_jsxFileName,lineNumber:38,columnNumber:9}},_react["default"].createElement(_title["default"],{primary:true,style:{marginBottom:15},__source:{fileName:_jsxFileName,lineNumber:39,columnNumber:13}},"Tu actividad reciente"),activities!=[]?_react["default"].createElement(_react["default"].Fragment,null,activities.map(function(obj,index){return _react["default"].createElement(_progressBox["default"],{obj:obj,key:index,__source:{fileName:_jsxFileName,lineNumber:45,columnNumber:45}});}),_react["default"].createElement(_reactNativeGestureHandler.TouchableOpacity,{onPress:function onPress(){return navigation.navigate("ProgressHistorial");},style:{backgroundColor:_palleteColors["default"].background,padding:15,borderRadius:10,flexDirection:"row",justifyContent:"space-between",alignContent:"center"},__source:{fileName:_jsxFileName,lineNumber:47,columnNumber:13}},_react["default"].createElement(_title["default"],{primary:true,__source:{fileName:_jsxFileName,lineNumber:48,columnNumber:17}},"Ver toda la actividad"),_react["default"].createElement(_MaterialCommunityIcons["default"],{name:"arrow-right",size:30,color:_palleteColors["default"].textPrimaryColor,__source:{fileName:_jsxFileName,lineNumber:49,columnNumber:17}}))):_react["default"].createElement(_messageBox["default"],{message:"No tienes actividad reciente",__source:{fileName:_jsxFileName,lineNumber:53,columnNumber:13}}));}