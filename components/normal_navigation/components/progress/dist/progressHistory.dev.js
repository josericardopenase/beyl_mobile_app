"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=ProgressHistory;var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _reactNativeGestureHandler=require("react-native-gesture-handler");var _apiGeneralHistory=_interopRequireDefault(require("../../../../api/apiGeneralHistory"));var _useApiCallback=_interopRequireDefault(require("../../../../customHooks/useApiCallback"));var _generalContainer=_interopRequireDefault(require("../../../general_components/generalContainer"));var _loading=_interopRequireDefault(require("../../../general_components/loading"));var _progressDateBox=_interopRequireDefault(require("./history/progressDateBox"));var _jsxFileName="/home/pepe/Escritorio/beylapp/components/normal_navigation/components/progress/progressHistory.js";function ProgressHistory(){var _useState=(0,_react.useState)([]),_useState2=(0,_slicedToArray2["default"])(_useState,2),results=_useState2[0],setResults=_useState2[1];var getProgress=(0,_useApiCallback["default"])(_apiGeneralHistory["default"].getHistoryPaged,function(data){console.log(data);setResults([].concat((0,_toConsumableArray2["default"])(results),(0,_toConsumableArray2["default"])(data.results)));});var _useState3=(0,_react.useState)(1),_useState4=(0,_slicedToArray2["default"])(_useState3,2),page=_useState4[0],setPage=_useState4[1];(0,_react.useEffect)(function(){getProgress.request(page,20);},[page]);return _react["default"].createElement(_generalContainer["default"],{__source:{fileName:_jsxFileName,lineNumber:23,columnNumber:9}},_react["default"].createElement(_reactNativeGestureHandler.FlatList,{data:results,keyExtractor:function keyExtractor(item,index){return index.toString();},renderItem:function renderItem(_ref){var item=_ref.item,index=_ref.index;return _react["default"].createElement(_progressDateBox["default"],{obj:item,active:index>0?results[index-1].date!=item.date:true,first:index==0,__source:{fileName:_jsxFileName,lineNumber:29,columnNumber:48}});},showsVerticalScrollIndicator:false,onEndReached:function onEndReached(){return setPage(page+1);},__source:{fileName:_jsxFileName,lineNumber:26,columnNumber:13}}),getProgress.loading?_react["default"].createElement(_loading["default"],{__source:{fileName:_jsxFileName,lineNumber:34,columnNumber:36}}):null);}