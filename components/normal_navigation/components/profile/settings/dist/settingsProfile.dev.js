"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=SettingsProfile;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _icons=require("@material-ui/icons");var _formik=require("formik");var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _reactNativeGestureHandler=require("react-native-gesture-handler");var _form=_interopRequireDefault(require("../../../../general_components/form"));var _FormEmail=_interopRequireDefault(require("../../../../general_components/forms/high_level_inputs/FormEmail"));var _FormPassword=_interopRequireDefault(require("../../../../general_components/forms/high_level_inputs/FormPassword"));var _formCompleteInput=_interopRequireDefault(require("../../../../general_components/forms/input_types/formCompleteInput"));var _generalContainer=_interopRequireDefault(require("../../../../general_components/generalContainer"));var _bold=_interopRequireDefault(require("../../../../general_components/titles/bold"));var _title=_interopRequireDefault(require("../../../../general_components/titles/title1"));var _title2=_interopRequireDefault(require("../../../../general_components/titles/title3"));var Yup=_interopRequireWildcard(require("yup"));var _FormPicker=_interopRequireDefault(require("../../../../general_components/forms/FormPicker"));var _titleError=_interopRequireDefault(require("../../../../general_components/titles/titleError"));var _useApiCallback=_interopRequireDefault(require("../../../../../customHooks/useApiCallback"));var _apiProfile=_interopRequireDefault(require("../../../../../api/apiProfile"));var _FormButton=_interopRequireDefault(require("../../../../general_components/forms/FormButton"));var _useApi=_interopRequireDefault(require("../../../../../customHooks/useApi"));var _loading=_interopRequireDefault(require("../../../../general_components/loading"));var _native=require("@react-navigation/native");var _eventingBus=_interopRequireDefault(require("eventing-bus"));var _events=require("../../../../../events/events");var _jsxFileName="/home/pepe/Escritorio/beyl/beyl_mobile_app/components/normal_navigation/components/profile/settings/settingsProfile.js";var validationSchema=Yup.object().shape({email:Yup.string().required().email().label("Email"),password:Yup.string().required().label("Password").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})/,"Tiene que tener una mayúscula, al menos un  \n número y mínimo 8 carácteres"),name:Yup.string().required().label("Nombre"),surname:Yup.string().required().label("Apellidos"),height:Yup.number("Tiene que ser un número").required().min(100).max(300).label("Altura"),weight:Yup.number("Tiene que ser un número").required().min(10).max(250).label("Peso"),sex:Yup.string().required().oneOf(["hombre","mujer"]).label("Sexo"),key:Yup.string().required().label("Clave de entrenador"),alergias:Yup.string().optional().label("Alergias"),born_date:Yup.string().required().label("Fecha de nacimiento"),amount_excersise:Yup.string().required().label("Actividad física")});function SettingsProfile(){var navigation=(0,_native.useNavigation)();var getInformation=(0,_useApi["default"])(_apiProfile["default"].getProfileAthlete);var _useState=(0,_react.useState)(false),_useState2=(0,_slicedToArray2["default"])(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var modifyProfile=(0,_useApiCallback["default"])(_apiProfile["default"].modifyProfileAthlete,function(data){_eventingBus["default"].publish(_events.MODIFIED_PROFILE);navigation.navigate("Settings");});var handleSubmit=function handleSubmit(values){setLoading(true);modifyProfile.request(values);};(0,_react.useEffect)(function(){getInformation.request();},[]);if(getInformation.loading)return _react["default"].createElement(_loading["default"],{__source:{fileName:_jsxFileName,lineNumber:70,columnNumber:16}});var opcionesEjercicio=[{label:"Poco o ningún ejercicio",value:"ne"},{label:"Ejercicio ligero (1-3 días a la semana)",value:"el"},{label:"Ejercicio moderado (3-5 días a la semana)",value:"em"},{label:"Ejercicio fuerte (6-7 días a la semana)",value:"ef"},{label:"Ejercicio muy fuerte (dos veces al día)",value:"emf"}];return _react["default"].createElement(_generalContainer["default"],{__source:{fileName:_jsxFileName,lineNumber:76,columnNumber:9}},_react["default"].createElement(_reactNativeGestureHandler.ScrollView,{showsVerticalScrollIndicator:false,__source:{fileName:_jsxFileName,lineNumber:77,columnNumber:13}},_react["default"].createElement(_reactNative.View,{style:{marginTop:20},__source:{fileName:_jsxFileName,lineNumber:79,columnNumber:13}},_react["default"].createElement(_formik.Formik,{initialValues:{height:getInformation.data.height,sexo:getInformation.data.sexo,alergias:getInformation.data.alergias,born_date:getInformation.data.born_date,amount_excersise:getInformation.data.amount_excersise.toLowerCase()},onSubmit:function onSubmit(values){return handleSubmit(values);},__source:{fileName:_jsxFileName,lineNumber:80,columnNumber:21}},function(_ref){var handleSubmit=_ref.handleSubmit,errors=_ref.errors;return _react["default"].createElement(_form["default"],{__source:{fileName:_jsxFileName,lineNumber:87,columnNumber:25}},_react["default"].createElement(_formCompleteInput["default"],{defaultValue:getInformation.data.height.toString(),name:"height",placeholder:"Altura en cm",icon:"altimeter",__source:{fileName:_jsxFileName,lineNumber:88,columnNumber:29}}),_react["default"].createElement(_FormPicker["default"],{defaultValue:opcionesEjercicio.find(function(x){return x.value===getInformation.data.amount_excersise.toLowerCase();}).label,name:"amount_excersise",placeholder:"Actividad física",icon:"gender-male-female",options:opcionesEjercicio,__source:{fileName:_jsxFileName,lineNumber:89,columnNumber:29}}),_react["default"].createElement(_FormPicker["default"],{defaultValue:getInformation.data.sexo,name:"sex",placeholder:"sexo",icon:"gender-male-female",options:[{label:"Hombre",value:"hombre"},{label:"Mujer",value:"mujer"}],__source:{fileName:_jsxFileName,lineNumber:90,columnNumber:29}}),_react["default"].createElement(_formCompleteInput["default"],{defaultValue:getInformation.data.alergias,name:"alergias",placeholder:"Alergias",icon:"food",__source:{fileName:_jsxFileName,lineNumber:91,columnNumber:29}}),_react["default"].createElement(_titleError["default"],{error:modifyProfile.error.toString(),visible:modifyProfile.error?true:false,__source:{fileName:_jsxFileName,lineNumber:92,columnNumber:29}}),_react["default"].createElement(_FormButton["default"],{placeholder:"Guardar",loading:loading,onPress:function onPress(){if(!loading)handleSubmit();},__source:{fileName:_jsxFileName,lineNumber:94,columnNumber:29}}));}))));}